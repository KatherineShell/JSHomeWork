<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0">
    <title>polyfill</title>
</head>

<body>
    <div> </div>
</body>
<script type="text/javascript" src="./polyfill.js"></script>
<script type="text/javascript">

    var promise = new PPromise(function (resolve, rej) {
         setTimeout(function () {
            resolve(42)
         }, 1000)

    });

   /* new PPromise(function (resolve, rej) {
        setTimeout(function () {
            resolve(142)
        }, 1000)

    }).then(function (data) {
        console.log(data, ' promise 2')
        //   throw new Error('dskj')
    });
*/
    promise
        .then(function (data) {
            console.log(data, ' result 1')
            //   throw new Error('dskj')
        })
        .finally(function () {
            console.log('finally')
        })
        .catch(function (data) {
            console.log(data, ' error')
            return new PPromise(function (resolve, rej) {
              //  setTimeout(function () {
                    rej(7)
               // }, 1000)
            });
        }).done(function (data) { console.log(data, 'done') })
        .then(function (data) {
            console.log(data, ' result 2')
        }).then(function (data) {
            console.log(' result 3')
        })

</script>

</html>